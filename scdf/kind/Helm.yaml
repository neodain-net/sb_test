# ğŸ§¾ Helm Chart: ì‹¤ë¬´í˜• í…œí”Œë¦¿ êµ¬ì¡° (values.yaml ê¸°ë°˜)
# ëª©ì : Kind + K8s ìš´ì˜ í™˜ê²½ì—ì„œ Spring Batch + SCDF + ëª¨ë‹ˆí„°ë§ ì‹œìŠ¤í…œ ë°°í¬

# ë””ë ‰í„°ë¦¬ êµ¬ì¡° ê°œìš” (mychart/)

mychart/
â”œâ”€â”€ Chart.yaml                    # ì°¨íŠ¸ ë©”íƒ€ ì •ë³´ ì •ì˜ (ì´ë¦„, ë²„ì „ ë“±)
â”œâ”€â”€ values.yaml                  # ì‚¬ìš©ì ì •ì˜ ë³€ìˆ˜ íŒŒì¼ (ì´ë¯¸ ì‘ì„±ë¨)
â”œâ”€â”€ templates/                   # ì¿ ë²„ë„¤í‹°ìŠ¤ ë¦¬ì†ŒìŠ¤ í…œí”Œë¦¿
â”‚   â”œâ”€â”€ _helpers.tpl             # ê³µí†µ í…œí”Œë¦¿ í•¨ìˆ˜ ì •ì˜ (name, label ë“±)
â”‚   â”œâ”€â”€ deployment.yaml          # ë°°í¬í•  Pod/ì»¨í…Œì´ë„ˆ ì •ì˜ (SpringBoot ì•± ë“±)
â”‚   â”œâ”€â”€ service.yaml             # Service í¬íŠ¸ ë…¸ì¶œ ì •ì˜ (ClusterIP / NodePort)
â”‚   â”œâ”€â”€ pvc.yaml                 # PersistentVolumeClaim í…œí”Œë¦¿ (DB, Influx ë“±)
â”‚   â”œâ”€â”€ secret.yaml              # DB, í† í° ë“± ë¯¼ê° ì •ë³´ ë¶„ë¦¬ ì €ì¥
â”‚   â”œâ”€â”€ configmap.yaml           # í™˜ê²½ì„¤ì • íŒŒì¼ (.properties / .yml) ì „ë‹¬ìš©
â”‚   â”œâ”€â”€ ingress.yaml             # Ingress ì ‘ê·¼ ì œì–´ ë° ë„ë©”ì¸ ì—°ê²° ì„¤ì •
â”‚   â””â”€â”€ scdf-config.yaml         # SCDF Server + Skipper ê´€ë ¨ ì„¤ì • í…œí”Œë¦¿
â””â”€â”€ README.md                   # Helm Chart ì‚¬ìš© ì„¤ëª…ì„œ (ì˜µì…˜ ëª©ë¡ í¬í•¨)


# ê° í…œí”Œë¦¿ íŒŒì¼ ì„¤ëª… ìš”ì•½:

## ğŸ§© 1. Chart.yaml
```yaml
apiVersion: v2
name: monitoring-batch-platform
version: 0.1.0
description: ì‹¤ë¬´í˜• SCDF + Batch + Influx + Grafana Helm Chart
appVersion: "1.0"
```

## ğŸ§© 2. templates/deployment.yaml (ê³µí†µ í…œí”Œë¦¿)
```yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: {{ include "mychart.fullname" . }}
  labels:
    app: {{ include "mychart.name" . }}
spec:
  replicas: 1
  selector:
    matchLabels:
      app: {{ include "mychart.name" . }}
  template:
    metadata:
      labels:
        app: {{ include "mychart.name" . }}
    spec:
      containers:
        - name: {{ .Chart.Name }}
          image: "{{ .Values.image.repository }}:{{ .Values.image.tag }}"
          ports:
            - containerPort: {{ .Values.service.port }}
          envFrom:
            - configMapRef:
                name: {{ include "mychart.fullname" . }}-config
            - secretRef:
                name: {{ include "mychart.fullname" . }}-secret
      nodeSelector:
        {{- toYaml .Values.nodeSelector | nindent 8 }}
```

## ğŸ§© 3. templates/service.yaml
```yaml
apiVersion: v1
kind: Service
metadata:
  name: {{ include "mychart.fullname" . }}
spec:
  type: NodePort
  selector:
    app: {{ include "mychart.name" . }}
  ports:
    - port: {{ .Values.service.port }}
      targetPort: {{ .Values.service.port }}
      nodePort: {{ .Values.service.nodePort }}
```

## ğŸ§© 4. templates/pvc.yaml
```yaml
{{- if .Values.persistence.enabled }}
apiVersion: v1
kind: PersistentVolumeClaim
metadata:
  name: {{ .Values.persistence.existingClaim | default (printf "%s-pvc" .Chart.Name) }}
spec:
  accessModes:
    - ReadWriteOnce
  resources:
    requests:
      storage: 10Gi
{{- end }}
```

## ğŸ§© 5. templates/secret.yaml
```yaml
apiVersion: v1
kind: Secret
metadata:
  name: {{ include "mychart.fullname" . }}-secret
  labels:
    app: {{ include "mychart.name" . }}
type: Opaque
data:
  MYSQL_PASSWORD: {{ .Values.auth.password | b64enc }}
  INFLUXDB_TOKEN: {{ .Values.env.INFLUXDB_ADMIN_TOKEN | b64enc }}
```

## ğŸ§© 6. templates/configmap.yaml
```yaml
apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ include "mychart.fullname" . }}-config
  labels:
    app: {{ include "mychart.name" . }}
data:
  TZ: "Asia/Seoul"
```

## ğŸ§© 7. templates/ingress.yaml
```yaml
{{- if .Values.ingress.enabled }}
apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
  name: {{ include "mychart.fullname" . }}
  annotations:
    nginx.ingress.kubernetes.io/rewrite-target: /
spec:
  rules:
    - host: {{ .Values.ingress.host }}
      http:
        paths:
          - path: /
            pathType: Prefix
            backend:
              service:
                name: {{ include "mychart.fullname" . }}
                port:
                  number: {{ .Values.service.port }}
{{- end }}
```

---
